# ============================================================
# NKFX Universal Health Monitor Configuration
# ============================================================
# Add new bots/services here - they'll automatically be monitored
# Last updated: 2026-01-06

telegram:
  bot_token: "8521469204:AAHOlxYLdy7sb2QvHjdgP1nxNxMyX_0yemY"
  chat_id: "886054648"

settings:
  check_interval: 300  # 5 minutes (for cron reference)
  auto_restart: true
  alert_on_restart: true
  alert_on_recovery: true
  daily_summary: true
  daily_summary_hour: 8  # 08:00 UTC
  log_file: "/root/nkfx/logs/health.log"
  state_file: "/root/nkfx/monitoring/state.json"

services:
  # ============================================================
  # SMC BOT ECOSYSTEM
  # ============================================================
  - name: "nkfx-smc"
    type: "docker"
    critical: true
    compose_path: "/root/trading-stack-smc"
    health_endpoint: null
    description: "SMC Trading Bot"

  - name: "mt5-bridge-smc"
    type: "docker"
    critical: true
    compose_path: "/root/trading-stack-smc"
    health_endpoint: "http://localhost:5001/health"
    description: "MT5 Bridge for SMC"

  - name: "mt5-vnc-smc"
    type: "docker"
    critical: true
    compose_path: "/root/trading-stack-smc"
    container_pattern: "mt5-vnc-smc"  # Handles naming variations
    health_endpoint: null
    description: "MT5 VNC for SMC"

  # ============================================================
  # WYCKOFF BOT ECOSYSTEM
  # ============================================================
  - name: "nkfx-me"
    type: "docker"
    critical: true
    compose_path: "/root/nkfx/bots/nkfx-wyckoff-bot"
    health_endpoint: null
    description: "Wyckoff Trading Bot"

  - name: "mt5-bridge"
    type: "docker"
    critical: true
    compose_path: "/root/trading-stack"
    health_endpoint: "http://localhost:5000/health"
    description: "MT5 Bridge for Wyckoff"

  - name: "mt5-vnc"
    type: "docker"
    critical: true
    compose_path: "/root/trading-stack"
    health_endpoint: null
    description: "MT5 VNC for Wyckoff"

  # ============================================================
  # TRADING FACTORY
  # ============================================================
  - name: "nkfx-factory"
    type: "docker"
    critical: true
    compose_path: "/root/nkfx/infrastructure/nkfx-trading-factory"
    health_endpoint: "http://localhost:8000/health"
    description: "NKFX Trading Factory"

  # ============================================================
  # CRYPTO BOTS
  # ============================================================
  - name: "kraken-bot"
    type: "docker"
    critical: true
    compose_path: "/root/nkfx/tools/kraken-tool"
    health_endpoint: null
    description: "Kraken DCA Bot"

  - name: "pancakeswap-bot"
    type: "docker"
    critical: false
    compose_path: "/root/nkfx/tools/pancakeswap-tool"
    health_endpoint: null
    description: "PancakeSwap Bot"

  # ============================================================
  # SIGNAL INTELLIGENCE (Feature Extraction)
  # ============================================================
  - name: "nkfx-features"
    type: "docker"
    critical: false
    compose_path: "/root/nkfx/infrastructure/nkfx-signal-intelligence"
    health_endpoint: "http://localhost:8100/health"
    description: "Signal Feature Extraction"

  - name: "nkfx-qdrant"
    type: "docker"
    critical: false
    compose_path: "/root/nkfx/infrastructure/nkfx-signal-intelligence"
    health_endpoint: "http://localhost:6333/readyz"
    description: "Qdrant Vector DB"

  # ============================================================
  # INFRASTRUCTURE SERVICES
  # ============================================================
  - name: "root_n8n_1"
    type: "docker"
    critical: true
    compose_path: "/root"
    health_endpoint: null
    description: "n8n Automation"

  - name: "redis-calendar"
    type: "docker"
    critical: false
    compose_path: null  # Standalone
    health_endpoint: null
    description: "Redis for Calendar"

  - name: "webdis"
    type: "docker"
    critical: false
    compose_path: null
    health_endpoint: null
    description: "Webdis Redis HTTP"

  - name: "tesseract-ocr"
    type: "docker"
    critical: false
    compose_path: "/root"
    health_endpoint: null
    description: "Tesseract OCR Service"

  - name: "root_cloudflared_1"
    type: "docker"
    critical: true
    compose_path: "/root"
    health_endpoint: null
    description: "Cloudflare Tunnel"
